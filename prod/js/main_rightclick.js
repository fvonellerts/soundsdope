function remove_rightclick(){$(".rightclick_popup").addClass("popout"),$(".rightclick_popup").removeClass("popin")}function rightclick_popup(i,c){var a=i.pageY+$(".rightclick_popup").height()/2,p=i.pageX+$(".rightclick_popup").width()/2;p+$(".rightclick_popup").width()/2>$(window).width()&&(p=$(window).width()-10-$(".rightclick_popup").width()/2),$(".rightclick_popup").hasClass("popin")?$(".rightclick_popup").fadeTo("fast",0,function(){rightclick_fill(c),$(".rightclick_popup").css({top:a,left:p}),$(".rightclick_popup").fadeTo("slow",1)}):(rightclick_fill(c),$(".rightclick_popup").css({top:a,left:p}),$(".rightclick_popup").addClass("popin"),$(".rightclick_popup").removeClass("popout"))}function rightclick_fill(i){$(".rightclick_popup").empty();var c='<div class="icon_container"><i class="material-icons">playlist_add</i></div>',a='<div class="icon_container"><i class="material-icons">playlist_play</i></div>',p='<div class="icon_container"><i class="material-icons">favorite</i></div>',t='<div class="icon_container"><i class="material-icons">favorite_border</i></div>',l='<div class="icon_container"><i class="material-icons">file_download</i></div>',o='<div class="icon_container"><i class="material-icons">cloud_queue</i></div>',e='<div class="icon_container"><i class="material-icons">close</i></div>',n='<div class="icon_container"><i class="material-icons">mode_edit</i></div>',r='<div class="icon_container"><i class="material-icons">play_arrow</i></div>',d="",_=e+"Cancel",s=r+"Play",k=c+"Add to playlist",h=a+"Remove from playlist",u=p+"Favorite",g=t+"Unfavorite",m=n+"Rename",v=o+"View album",f=l+"Download track",b=$("<li/>").data("action","cancel").html(_),w=$("<li/>").data("action","track_play").html(s),y=$("<li/>").data("action","desk_playlist").html(k),C=$("<li/>").data("action","desk_playlist_add").html(k),R=$("<li/>").data("action","track_playlist_add").html(k),D=$("<li/>").data("action","album_playlist_remove").html(h),U=$("<li/>").data("action","track_playlist_remove").html(h),E=$("<li/>").data("action","desk_add").html(u),T=$("<li/>").data("action","desk_remove").html(g),q=$("<li/>").data("action","desk_rename").html(m),A=$("<li/>").data("action","album_view").html(v),F=$("<li/>").data("action","track_download").html(f);switch(i){case"desk_album":$(".rightclick_popup").append(A),$(".rightclick_popup").append(y),$(".rightclick_popup").append(T);break;case"desk_playlist":$(".rightclick_popup").append(C),$(".rightclick_popup").append(q),$(".rightclick_popup").append(T);break;case"track":$(".rightclick_popup").append(w),$(".rightclick_popup").append(R),$(".rightclick_popup").append(A),$(".rightclick_popup").append(F);break;case"popup_track":$(".rightclick_popup").append(w),$(".rightclick_popup").append(R),$(".rightclick_popup").append(F);break;case"album":$(".rightclick_popup").append(A),$(".rightclick_popup").append(y),$(".rightclick_popup").append(E);break;case"playlist_track":$(".rightclick_popup").append(w),$(".rightclick_popup").append(U),$(".rightclick_popup").append(F);break;case"playlist_album":$(".rightclick_popup").append(A),$(".rightclick_popup").append(D);break;case"edit_track":d+="<li onclick=\"rightclick_action_admin('edit_remove')\">Remove track</li>";break;case"edit_cover":d+="<li onclick=\"rightclick_action_admin('edit_coverupload')\">Upload image</li>",d+="<li onclick=\"rightclick_action_admin('edit_coverdownload')\">Download image from URL</li>";break;case"edit_album":d+="<li onclick=\"rightclick_action_admin('edit_album_edit')\">Edit album</li>",d+="<li onclick=\"rightclick_action_admin('edit_album_info')\">Edit info</li>",d+="<li onclick=\"rightclick_action_admin('edit_album_remove')\">Delete album</li>"}$(".rightclick_popup").append(d),$(".rightclick_popup").append(b)}var $rc_referer;$(function(){$("body").append('<ul class="rightclick_popup"></ul>'),$(document).mouseup(function(i){return 1!=i.which?!1:void($(".rightclick_popup").is(i.target)||0!==$(".rightclick_popup").has(i.target).length||$(".rightclick_popup").hasClass("popin")&&remove_rightclick())})}),$(document).on("click",".rc",function(i){return $rc_referer=$(this).parent().hasClass("infos")?$(this).parent().parent():$(this).parent(),rightclick_popup(i,$(this).data("action")),!1}),$(document).on("click",".rightclick_popup > li",function(i){rightclick_action($(this).data("action"))});